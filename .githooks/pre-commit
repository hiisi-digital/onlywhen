#!/bin/sh
#----------------------------------------------------------------------------------------------------
# Pre-commit hook - runs format check on staged files
#----------------------------------------------------------------------------------------------------

echo "Running Deno format check..."
if ! deno fmt --check; then
  echo "Format check failed. Attempting to auto-format..."
  deno fmt
  echo "Auto-formatted. Please review changes and commit again."
  exit 1
fi

echo "Running Deno lint..."
if ! deno lint; then
  echo "Lint check failed."
  exit 1
fi

echo "Pre-commit checks passed!"
